<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>

<body class="bg-dark">
    <nav class="navbar bg-dark bg-body-tertiary" data-bs-theme="dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Заметки</a>
        </div>
    </nav>

    <div class="container mt-3 mb-3">
        <h2 class="text-light mb-3">Новая заметка</h2>
        <div class="form-floating">
        <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea"></textarea>
            <label for="floatingTextarea">Тайтл</label>
        </div>
        <div class="form-floating mt-1">
            <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea2" style="height: 200px"></textarea>
            <label for="floatingTextarea2">Заметка</label>
            <div type="button" id="save" class="btn btn-success w-100 mt-3">Сохранить</div>
            <a type="button" class="btn btn-danger w-100 mt-1" href="/">Назад</a>
        </div>
    </div>

    <script>
        let title = document.querySelector("#floatingTextarea");
        let text = document.querySelector("#floatingTextarea2");

        document.querySelector("#save").addEventListener("click", async () => {
            let req = await fetch(`/api/note`, {
                method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ title: title.value, text: text.value})
            });

            setTimeout(() => {window.location = "/"}, 1000);
        })
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
</body>

</html>